<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Ficha Avançada - Shinigamis & Hollows</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
  body { font-family: Arial, sans-serif; background: #111; color: #eee; margin:0; padding:0; text-align:center;}
  h1 { background: #222; padding: 15px; margin:0; color: #f4c542; }
  .ficha { max-width: 950px; margin: 20px auto; padding: 20px; border-radius: 10px; box-shadow: 0 0 15px rgba(0,0,0,0.7); }
  .campo { display:flex; justify-content:space-between; margin:8px 0; padding:10px; border-radius:6px; }
  label { flex:1; text-align:left; }
  input, select, textarea { flex:2; padding:6px; border:none; border-radius:4px; background:#333; color:#fff; }
  .atributos { display:grid; grid-template-columns: repeat(3, 1fr); gap:10px; margin-top:20px; }
  .atributo { background:#2a2a2a; padding:10px; border-radius:6px; text-align:center; }
  .atributo input { width:60px; text-align:center; font-size:1.2em; }
  .bonus { display:grid; grid-template-columns: repeat(4,1fr); gap:10px; margin-top:20px; }
  .bonus div { background:#2a2a2a; padding:10px; border-radius:6px; text-align:center; }
  .pericias, .habilidades, .equipamentos { margin-top:20px; display:grid; grid-template-columns: repeat(2,1fr); gap:10px; }
  .item { background:#2a2a2a; padding:10px; border-radius:6px; display:flex; justify-content:space-between; }
  .botao { margin-top:20px; padding:10px 20px; background:#f4c542; color:#111; border:none; border-radius:6px; cursor:pointer; font-weight:bold; }
  .btn-add { background:#444; color:#fff; border:none; border-radius:4px; padding:4px 8px; cursor:pointer; }
</style>
</head>
<body>
<h1>Ficha de Personagem Avançada</h1>
<div class="ficha" id="ficha">
  <div class="campo">
    <label>Nome:</label>
    <input type="text" id="nome" placeholder="Digite o nome">
  </div>
  <div class="campo">
    <label>Raça:</label>
    <select id="raca" onchange="atualizarCor()">
      <option value="Shinigami">Shinigami</option>
      <option value="Hollow">Hollow</option>
      <option value="Quincy">Quincy</option>
      <option value="Fullbringer">Fullbringer</option>
    </select>
  </div>
  <div class="campo">
    <label>Classe:</label>
    <input type="text" id="classe" placeholder="Ex: Shinigami da 11ª divisão">
  </div>
  <div class="campo">
    <label>Nível:</label>
    <input type="number" id="nivel" min="1" value="1">
  </div>

  <h2>Atributos</h2>
  <div class="atributos">
    <div class="atributo">FOR<br><input type="number" id="for" value="0"></div>
    <div class="atributo">DES<br><input type="number" id="des" value="0"></div>
    <div class="atributo">CON<br><input type="number" id="con" value="0"></div>
    <div class="atributo">INT<br><input type="number" id="int" value="0"></div>
    <div class="atributo">SAB<br><input type="number" id="sab" value="0"></div>
    <div class="atributo">CAR<br><input type="number" id="car" value="0"></div>
  </div>

  <h2>Bônus Especiais</h2>
  <div class="bonus">
    <div>Bônus de Proficiência<br><input type="number" id="prof" value="0"></div>
    <div>Esquiva<br><input type="number" id="esquiva" value="0"></div>
    <div>Dureza<br><input type="number" id="dureza" value="0"></div>
    <div>Percepção Passiva<br><input type="number" id="percepcao" value="0"></div>
  </div>

  <h2>Perícias</h2>
  <div class="pericias" id="pericias">
    <div class="item"><input type="text" placeholder="Nome da perícia"><input type="number" value="0"></div>
  </div>
  <button class="btn-add" onclick="adicionarPericia()">+ Perícia</button>

  <h2>Habilidades</h2>
  <div class="habilidades" id="habilidades">
    <div class="item"><input type="text" placeholder="Habilidade"><input type="text" placeholder="Descrição"></div>
  </div>
  <button class="btn-add" onclick="adicionarHabilidade()">+ Habilidade</button>

  <h2>Equipamentos</h2>
  <div class="equipamentos" id="equipamentos">
    <div class="item"><input type="text" placeholder="Equipamento"><input type="text" placeholder="Descrição"></div>
  </div>
  <button class="btn-add" onclick="adicionarEquipamento()">+ Equipamento</button>

  <button class="botao" onclick="salvarFicha()">Salvar Ficha</button>
  <button class="botao" onclick="exportarPDF()">Exportar PDF</button>
</div>

<script>
function atualizarCor() {
  const ficha = document.getElementById('ficha');
  const raca = document.getElementById('raca').value;
  switch(raca) {
    case 'Shinigami': ficha.style.background='#1a2b4c'; break;
    case 'Hollow': ficha.style.background='#4b1a4c'; break;
    case 'Quincy': ficha.style.background='#1a4c2b'; break;
    case 'Fullbringer': ficha.style.background='#4c3a1a'; break;
    default: ficha.style.background='#1c1c1c';
  }
}

function adicionarPericia() {
  const pericias = document.getElementById('pericias');
  const div = document.createElement('div');
  div.className='item';
  div.innerHTML='<input type="text" placeholder="Nome da perícia"><input type="number" value="0">';
  pericias.appendChild(div);
}

function adicionarHabilidade() {
  const hab = document.getElementById('habilidades');
  const div = document.createElement('div');
  div.className='item';
  div.innerHTML='<input type="text" placeholder="Habilidade"><input type="text" placeholder="Descrição">';
  hab.appendChild(div);
}

function adicionarEquipamento() {
  const eq = document.getElementById('equipamentos');
  const div = document.createElement('div');
  div.className='item';
  div.innerHTML='<input type="text" placeholder="Equipamento"><input type="text" placeholder="Descrição">';
  eq.appendChild(div);
}

function salvarFicha() {
  const fichaData = {
    nome: document.getElementById('nome').value,
    raca: document.getElementById('raca').value,
    classe: document.getElementById('classe').value,
    nivel: document.getElementById('nivel').value,
    atributos: {
      FOR: document.getElementById('for').value,
      DES: document.getElementById('des').value,
      CON: document.getElementById('con').value,
      INT: document.getElementById('int').value,
      SAB: document.getElementById('sab').value,
      CAR: document.getElementById('car').value
    },
    bonus: {
      proficiencia: document.getElementById('prof').value,
      esquiva: document.getElementById('esquiva').value,
      dureza: document.getElementById('dureza').value,
      percepcao: document.getElementById('percepcao').value
    },
    pericias: Array.from(document.querySelectorAll('#pericias .item')).map(i=>{
      return {nome:i.children[0].value, valor:i.children[1].value};
    }),
    habilidades: Array.from(document.querySelectorAll('#habilidades .item')).map(i=>{
      return {nome:i.children[0].value, descricao:i.children[1].value};
    }),
    equipamentos: Array.from(document.querySelectorAll('#equipamentos .item')).map(i=>{
      return {nome:i.children[0].value, descricao:i.children[1].value};
    })
  };
  localStorage.setItem('fichaPersonagem', JSON.stringify(fichaData));
  alert('Ficha salva com sucesso!');
}

function exportarPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  doc.setFontSize(16);
  doc.text("Ficha de Personagem", 105, 15, {align:"center"});
  const nome = document.getElementById('nome').value;
  const raca = document.getElementById('raca').value;
  const classe = document.getElementById('classe').value;
  const nivel = document.getElementById('nivel').value;
  doc.setFontSize(12);
  doc.text(`Nome: ${nome}`, 20, 30);
  doc.text(`Raça: ${raca}`, 20, 40);
  doc.text(`Classe: ${classe}`, 20, 50);
  doc.text(`Nível: ${nivel}`, 20, 60);

  let y = 70;
  doc.text("Atributos:", 20, y); y+=10;
  const atributos = ['FOR','DES','CON','INT','SAB','CAR'];
  atributos.forEach(a=>{
    const val = document.getElementById(a.toLowerCase()).value;
    doc.text(`${a}: ${val}`, 30, y); y+=7;
  });

  y+=5;
  doc.text("Bônus Especiais:", 20, y); y+=10;
  doc.text(`Proficiência: ${document.getElementById('prof').value}`, 30, y); y+=7;
  doc.text(`Esquiva: ${document.getElementById('esquiva').value}`, 30, y); y+=7;
  doc.text(`Dureza: ${document.getElementById('dureza').value}`, 30, y); y+=7;
  doc.text(`Percepção Passiva: ${document.getElementById('percepcao').value}`, 30, y); y+=7;

  y+=5;
  doc.text("Perícias:", 20, y); y+=10;
  document.querySelectorAll('#pericias .item').forEach(p=>{
    doc.text(`${p.children[0].value}: ${p.children[1].value}`, 30, y); y+=7;
  });

  y+=5;
  doc.text("Habilidades:", 20, y); y+=10;
  document.querySelectorAll('#habilidades .item').forEach(h=>{
    doc.text(`${h.children[0].value}: ${h.children[1].value}`, 30, y); y+=7;
  });

  y+=5;
  doc.text("Equipamentos:", 20, y); y+=10;
  document.querySelectorAll('#equipamentos .item').forEach(eq=>{
    doc.text(`${eq.children[0].value}: ${eq.children[1].value}`, 30, y); y+=7;
  });

  doc.save(`${nome || 'Ficha'}.pdf`);
}
</script>
</body>
</html>


